---
layout: page
permalink: "/calculation/"
---

<div id="calc-content-div" class="calculation_area">
    Current Hash Rate: <span id="cur_hash_rate"></span>
    <p>
        Hash Rate: 
        <input id="hash_rate" class="input_box"> 
        <select id="unit_select" class="select_box">
            <option value="g">GH/s</option>
            <option value="t">TH/s</option>
        </select>
    </p>

    <p>
        Bitcoin Price ($): 
        <input id="bitcoin_price" class="input_box"> 
    </p>

    <p>
        Power consumption (watts): 
        <input id="power_consumption" class="input_box"> 
    </p>

    <p>
        Cost per KW/h in $: 
        <input id="cost_kw" class="input_box"> 
    </p>

    <p>User % of Hash Rate: <sapn id="user_hash_rate" class="show_box">0</span></p>

    <p>Chance of user finding a block: <span id="chance" class="show_box">0</span></p>

    <p>
        Estimated earned per day at 12.5 BTC / block: <span id="earned_btc_day" class="show_box">0</span> BTC or in dollars $<span id="earned_dollar_day" class="show_box">0</span>
        <br>Electricity costs per day: $<sapn id="ele_costs_day" class="show_box">0</span>
    </p>

    <p>
        Estimated earned per month at 12.5 BTC / block: <span id="earned_btc_month" class="show_box">0</span> BTC or in $<span id="earned_dollar_month" class="show_box">0</span>
        <br>Electricity costs per month: $<sapn id="ele_costs_month" class="show_box">0</span>
    </p>

    <p>
        Estimated earned per year at 12.5 BTC / block: <span id="earned_btc_year" class="show_box">0</span> BTC or in $<span id="earned_dollar_year" class="show_box">0</span>
        <br>Electricity costs per year: $<sapn id="ele_costs_year" class="show_box">0</span>
    </p>

</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script>
    var height;
    jQuery(document).ready(function($){
        var hashrate;
        $.getJSON("https://www.satochi.co/latest-hashrate", function( data ) {
            //console.log(data);
            hashrate = data;
            var append_html = hashrate.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            $("#cur_hash_rate").append(append_html);
        });

        $.getJSON("https://www.satochi.co/latest", function( data ) {
            //console.log(data.Price);
            b = data.Price.toString().split(".");
            b[0] = b[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,")
            c = b.join('.');
            $("#bitcoin_price").val(c);
        });

        function stringToTS(s) {
            b = s.toString().split(".");
            b[0] = b[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,")
            c = b.join('.');
            return c;
        }

        var eventCalc1Handler = function() {
            //s = parseFloat(jQuery("#hash_rate").val().toString().replace(/\,/g,''));
            //jQuery("#hash_rate").val(s);
            var unit = 1;
            var sel_index = document.getElementById("unit_select").selectedIndex;
            if (document.getElementById("unit_select").options[sel_index].value == "t") unit = 100;

            s = jQuery("#hash_rate").val().toString().replace(/\,/g,'');
            jQuery("#hash_rate").val(stringToTS(s));

            price = jQuery("#bitcoin_price").val().toString().replace(/\,/g,'');
            jQuery("#bitcoin_price").val(stringToTS(price));

            uhr = s / hashrate * unit;
            if (isNaN(uhr)) {
                jQuery("#user_hash_rate").html("0");
                jQuery("#chance").html("0");
                jQuery("#earned_btc_day").html("0");
                jQuery("#earned_btc_month").html("0");
                jQuery("#earned_dollar_day").html("0");
                jQuery("#earned_dollar_month").html("0");
            } else {
                q = uhr.toFixed(8);
                jQuery("#user_hash_rate").html(stringToTS(q));

                uhr *= 144;
                q = uhr.toFixed(8);
                jQuery("#chance").html(stringToTS(q));

                uhr *= 12.5;
                q = uhr.toFixed(8);
                jQuery("#earned_btc_day").html(stringToTS(q));

                q = (uhr * price).toFixed(2);
                jQuery("#earned_dollar_day").html(stringToTS(q));

                uhr *= 30;
                q = uhr.toFixed(8);
                jQuery("#earned_btc_month").html(stringToTS(q));

                q = (uhr * price).toFixed(2);
                jQuery("#earned_dollar_month").html(stringToTS(q));

                uhr = getValueForYear(uhr);
                q = uhr.toFixed(8);
                jQuery("#earned_btc_year").html(stringToTS(q));

                q = (uhr * price).toFixed(2);
                jQuery("#earned_dollar_year").html(stringToTS(q));
            }
        }

        function getValueForYear(v) {
            var t = 0;
            for (i = 0; i < 12; i ++) {
                v *= 0.8732584107;
                t += v;
            }
            return t;
        }

        var eventCalc2Hander = function() {
            //s = parseFloat(jQuery("#hash_rate").val().toString().replace(/\,/g,''));
            //jQuery("#hash_rate").val(s);
            p = jQuery("#power_consumption").val().toString().replace(/\,/g,'');
            jQuery("#power_consumption").val(stringToTS(p));

            c = jQuery("#cost_kw").val().toString().replace(/\,/g,'');
            jQuery("#cost_kw").val(stringToTS(c));

            ec = p / 1000 * 24 * c;
            if (isNaN(ec)) {
                jQuery("#ele_costs_day").html("0");
                jQuery("#ele_costs_month").html("0");
                jQuery("#ele_costs_year").html("0");
            } else {
                q = ec.toFixed(2);
                jQuery("#ele_costs_day").html(stringToTS(q));

                ec *= 30;
                q = ec.toFixed(2);
                jQuery("#ele_costs_month").html(stringToTS(q));

                ec *= 12;
                q = ec.toFixed(2);
                jQuery("#ele_costs_year").html(stringToTS(q));
            }
        }

        jQuery("#hash_rate").bind('input', eventCalc1Handler);
        jQuery("#bitcoin_price").bind('input', eventCalc1Handler);
        jQuery("#unit_select").bind('change', eventCalc1Handler);

        jQuery("#power_consumption").bind('input', eventCalc2Hander);
        jQuery("#cost_kw").bind('input', eventCalc2Hander);
    });
</script>
