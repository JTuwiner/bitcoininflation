---
layout: page
permalink: "/calculation/"
---

<div id="calc-content-div" class="calculation_area">
    Current Hash Rate: <span id="cur_hash_rate"></span>
    <p>
        Hash Rate: 
        <input id="hash_rate" class="input_box"> 
        <select id="unit_select" class="select_box">
            <option value="g">GH/s</option>
            <option value="t">TH/s</option>
        </select>
    </p>

    <p>
        Bitcoin Price ($): 
        <input id="bitcoin_price" class="input_box"> 
    </p>

    <p>
        Power consumption (watts): 
        <input id="power_consumption" class="input_box"> 
    </p>

    <p>
        Cost per KW/h in $: 
        <input id="cost_kw" class="input_box"> 
    </p>

    <p>User % of Hash Rate: <sapn id="user_hash_rate" class="show_box">0</span></p>

    <p>Chance of user finding a block: <span id="chance" class="show_box">0</span></p>

    <div>
        <div>Estimated earned per day at 12.5 BTC / block: <span id="earned_btc_day" class="show_box">0</span> BTC or in dollars $<span id="earned_dollar_day" class="show_box">0</span></div>
        <div>Electricity costs per day: $<sapn id="ele_costs_day" class="show_box">0</span></div>
        <div>Profit Per day: <span id="d_day" class="show_box">0</span></div>
    </div>
    <p>
    <div>
        <div>Estimated earned per month at 12.5 BTC / block: <span id="earned_btc_month" class="show_box">0</span> BTC or in $<span id="earned_dollar_month" class="show_box">0</span></div>
        <div>Electricity costs per month: $<sapn id="ele_costs_month" class="show_box">$0</span></div>
        <div>Profit Per month: <span id="d_month" class="show_box">0</span></div>
    </div>
    <p>
    <div>
        <div>Estimated earned per year at 12.5 BTC / block: <span id="earned_btc_year" class="show_box">0</span> BTC or in $<span id="earned_dollar_year" class="show_box">0</span></div>
        <div>Electricity costs per year: $<sapn id="ele_costs_year" class="show_box">0</span></div>
        <div>Profit Per year: <span id="d_year" class="show_box">0</span></div>
    </div>

</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script>
    var height;
    jQuery(document).ready(function($){
        var hashrate;
        var earned_day = 0;
        var earned_month = 0;
        var earned_year = 0;
        var ele_day = 0;
        var ele_month = 0;
        var ele_year = 0;

        $.getJSON("https://www.satochi.co/latest-hashrate", function( data ) {
            //console.log(data);
            hashrate = data;
            var append_html = hashrate.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            $("#cur_hash_rate").append(append_html);
        });

        $.getJSON("https://www.satochi.co/latest", function( data ) {
            //console.log(data.Price);
            b = data.Price.toString().split(".");
            b[0] = b[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,")
            c = b.join('.');
            $("#bitcoin_price").val(c);
        });

        function stringToTS(s) {
            b = s.toString().split(".");
            b[0] = b[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,")
            c = b.join('.');
            return c;
        }

        function getValueForYear(v) {
            var t = 0;
            for (i = 0; i < 12; i ++) {
                v *= 0.8732584107;
                t += v;
            }
            return t;
        }

        function getAppendHTML(v1, v2)
        {
            var append_html = "<span class='";
            if (v1 >= v2) {
                append_html += "positive-earning'>+$" + stringToTS((v1 - v2).toFixed(2)) + "</span>";
            } else {
                append_html += "negative-earning'>-$" + stringToTS((v2 - v1).toFixed(2)) + "</span>";
            }
            return append_html;
        }

        function setDValue_Style() {
            jQuery("#d_day").html(getAppendHTML(earned_day, ele_day));
            jQuery("#d_month").html(getAppendHTML(earned_month, ele_month));
            jQuery("#d_year").html(getAppendHTML(earned_year, ele_year));
            console.log(ele_day);
        }

        var eventCalc1Handler = function() {
            //s = parseFloat(jQuery("#hash_rate").val().toString().replace(/\,/g,''));
            //jQuery("#hash_rate").val(s);
            var unit = 1;
            var sel_index = document.getElementById("unit_select").selectedIndex;
            if (document.getElementById("unit_select").options[sel_index].value == "t") unit = 1000;

            s = jQuery("#hash_rate").val().toString().replace(/\,/g,'');
            jQuery("#hash_rate").val(stringToTS(s));

            price = jQuery("#bitcoin_price").val().toString().replace(/\,/g,'');
            jQuery("#bitcoin_price").val(stringToTS(price));

            uhr = s / hashrate * unit;
            if (isNaN(uhr)) {
                jQuery("#user_hash_rate").html("0");
                jQuery("#chance").html("0");
                jQuery("#earned_btc_day").html("0");
                jQuery("#earned_btc_month").html("0");
                jQuery("#earned_dollar_day").html("0");
                jQuery("#earned_dollar_month").html("0");
                earned_day = 0;
                earned_month = 0;
                earned_month = 0;
            } else {
                q = uhr.toFixed(8);
                jQuery("#user_hash_rate").html(stringToTS(q));

                uhr *= 144;
                jQuery("#chance").html(stringToTS(uhr.toFixed(8)));

                uhr *= 12.5;
                //jQuery("#earned_btc_day").html(stringToTS(uhr.toFixed(8)));
                //jQuery("#earned_dollar_day").html(stringToTS((uhr * price).toFixed(2)));

                uhr *= 30;
                //jQuery("#earned_btc_month").html(stringToTS(uhr.toFixed(8)));
                //jQuery("#earned_dollar_month").html(stringToTS((uhr * price).toFixed(2)));

                uhr = getValueForYear(uhr);
                earned_day = uhr / 365 * price;
                earned_month = uhr / 12 * price;
                earned_year = uhr * price;

                jQuery("#earned_btc_year").html(stringToTS(uhr.toFixed(8)));
                jQuery("#earned_dollar_year").html(stringToTS(earned_year.toFixed(2)));
                jQuery("#earned_btc_day").html(stringToTS((uhr/365).toFixed(8)));
                jQuery("#earned_dollar_day").html(stringToTS(earned_day.toFixed(2)));
                jQuery("#earned_btc_month").html(stringToTS((uhr/12).toFixed(8)));
                jQuery("#earned_dollar_month").html(stringToTS(earned_month.toFixed(2)));
            }

            setDValue_Style();
        }

        var eventCalc2Hander = function() {
            //s = parseFloat(jQuery("#hash_rate").val().toString().replace(/\,/g,''));
            //jQuery("#hash_rate").val(s);
            p = jQuery("#power_consumption").val().toString().replace(/\,/g,'');
            jQuery("#power_consumption").val(stringToTS(p));

            c = jQuery("#cost_kw").val().toString().replace(/\,/g,'');
            jQuery("#cost_kw").val(stringToTS(c));

            ec = p / 1000 * 24 * c;
            if (isNaN(ec)) {
                jQuery("#ele_costs_day").html("0");
                jQuery("#ele_costs_month").html("0");
                jQuery("#ele_costs_year").html("0");
                ele_day = 0;
                ele_month = 0;
                ele_year = 0;
            } else {
                q = ec.toFixed(2);
                jQuery("#ele_costs_day").html(stringToTS(q));

                ec *= 30;
                q = ec.toFixed(2);
                jQuery("#ele_costs_month").html(stringToTS(q));

                ec *= 12;
                q = ec.toFixed(2);
                jQuery("#ele_costs_year").html(stringToTS(q));

                ele_year = ec;
                ele_month = ec / 12;
                ele_day = ec / 12 / 30;
            }

            setDValue_Style()
        }

        jQuery("#hash_rate").bind('input', eventCalc1Handler);
        jQuery("#bitcoin_price").bind('input', eventCalc1Handler);
        jQuery("#unit_select").bind('change', eventCalc1Handler);

        jQuery("#power_consumption").bind('input', eventCalc2Hander);
        jQuery("#cost_kw").bind('input', eventCalc2Hander);
    });
</script>
